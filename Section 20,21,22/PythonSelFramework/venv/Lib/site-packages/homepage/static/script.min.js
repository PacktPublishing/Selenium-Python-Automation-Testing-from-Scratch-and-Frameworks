function oneElementInit(a,b){if(null!==document.querySelector(a))return new b(document.querySelector(a))}function initElement(a,b){var c=document.getElementsByClassName(a);if(null!==c[0])for(var d=0;d<c.length;d++)b(c[d])}function loadNewPage(a){window.open(a,"_blank")}
var cdSiteTopAppBar=oneElementInit(".mdc-top-app-bar",mdc.topAppBar.MDCTopAppBar),downloadTextField=oneElementInit(".mdc-text-field",mdc.textField.MDCTextField),radio1=oneElementInit("#radio-btn-1",mdc.radio.MDCRadio.attachTo),radio2=oneElementInit("#radio-btn-2",mdc.radio.MDCRadio.attachTo),formField1=oneElementInit("#form-field-1",mdc.formField.MDCFormField.attachTo),formField2=oneElementInit("#form-field-2",mdc.formField.MDCFormField.attachTo),previousList=oneElementInit(".mdc-list",mdc.list.MDCList.attachTo);
oneElementInit("#submit-main-form",mdc.ripple.MDCRipple.attachTo);initElement("mdc-button",mdc.ripple.MDCRipple.attachTo);formField1.input=radio1;formField2.input=radio2;radio1.value="mp3";radio2.value="m4a";radio1.listen("click",function(){radio1.checked=!0;radio2.checked=!1});radio2.listen("click",function(){radio2.checked=!0;radio1.checked=!1});var checkbox=oneElementInit(".mdc-checkbox",mdc.checkbox.MDCCheckbox.attachTo),checkboxFormField=oneElementInit("#checkbox-form-field",mdc.formField.MDCFormField.attachTo);
checkboxFormField.input=checkbox;checkbox.checked=!0;var qualityDict={"Standard (128k, Fast)":128,"Good (192k, Medium)":192,"Best (256k, Slow)":256},siteMenu=oneElementInit("#main-quality-menu",mdc.menu.MDCMenu.attachTo);document.getElementById("menu-opener-btn").addEventListener("click",function(a){siteMenu.open=!siteMenu.open});siteMenu.listen("MDCMenu:selected",function(a){document.getElementById("menu-opener-btn").innerHTML=a.detail.item.innerText});oneElementInit("#menu-pref-1",mdc.ripple.MDCRipple.attachTo);
oneElementInit("#menu-pref-2",mdc.ripple.MDCRipple.attachTo);oneElementInit("#menu-pref-3",mdc.ripple.MDCRipple.attachTo);var mdcSnackBar=oneElementInit(".mdc-snackbar",mdc.snackbar.MDCSnackbar.attachTo);function displayMDCSnackbar(a,b,c,d){mdcSnackBar.timeoutMs=d;mdcSnackBar.labelText=a;mdcSnackBar.actionButtonText=b;document.getElementById("snackbarActionBtnRipple").onclick=c;mdcSnackBar.open()}
function getPreviousTrack(a){var b=document.createElement("a");b.href=a;b.download=a.split("/").pop();document.body.appendChild(b);b.click();document.body.removeChild(b)}
function sendDownloadRequest(){if(""!==downloadTextField.value&&1==downloadTextField.valid){document.getElementsByClassName("adjusted-card-actions")[0].innerHTML=linearProgressBar;document.getElementById("format-selection").innerHTML="Your track is downloading, this may take a while depending on the length of the video(s) and speed of the server.";document.getElementById("form-field-1").style.display="none";document.getElementById("form-field-2").style.display="none";document.getElementById("checkbox-control").style.display=
"none";document.getElementById("checkbox-form-field").style.display="none";document.getElementById("quality-selection").style.display="none";document.getElementById("site-menu-anchor").style.display="none";var a=new XMLHttpRequest,b=new FormData;b.append("videoURL",downloadTextField.value);radio1.checked?b.append("format_preference","mp3"):radio2.checked&&b.append("format_preference","m4a");checkbox.checked?b.append("attach_thumb","yes"):b.append("attach_thumb","no");b.append("quality_preference",
qualityDict[document.getElementById("menu-opener-btn").innerHTML]);a.onreadystatechange=function(b){4==a.readyState&&200==a.status?(getPreviousTrack(b.target.responseText),window.location.reload(!1)):4==a.readyState&&300<=a.status&&(mdcSnackBar.listen("MDCSnackbar:closing",function(){mdcSnackBar.open()}),displayMDCSnackbar("Encountered an error, refresh the page and try again.","Refresh",function(){window.location.reload(!1)},1E4))};a.open("POST","./");a.send(b)}else displayMDCSnackbar("Please ensure that the link is valid and not empty.",
"OK",function(){},5E3)}var linearProgressBar='\n<div role="progressbar" class="mdc-linear-progress mdc-linear-progress--indeterminate">\n  <div class="mdc-linear-progress__buffering-dots"></div>\n  <div class="mdc-linear-progress__buffer"></div>\n  <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">\n    <span class="mdc-linear-progress__bar-inner"></span>\n  </div>\n  <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">\n    <span class="mdc-linear-progress__bar-inner"></span>\n  </div>\n</div>\n';
window.mdc.autoInit();
